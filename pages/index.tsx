import Head from 'next/head';
import styles from '../styles/Home.module.css';
import { Card, CardContent, Typography } from '@mui/material';
import useGetLaunches from '../hooks/useGetLaunches';
import Image from 'next/image';

export default function Home() {
  const { data } = useGetLaunches();

  return (
    <div className={styles.container}>
      <Head>
        <title>SpaceX Launches</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        {data?.docs.map((launch) => (
          <Card key={launch.id} data-testid="card" className={styles.card}>
            <CardContent>
              <Typography fontWeight="bold" sx={{ fontSize: 32 }} data-testid="card-title">
                {launch.name}
              </Typography>
              <Typography color="text.secondary" data-testid="card-date">
                Launched On: {new Date(launch.date_utc).toLocaleDateString()}
              </Typography>
              {launch.cores[0] && (
                <Typography color="text.secondary" data-testid="card-core">
                  Core: {launch.cores[0].core}
                </Typography>
              )}
              {launch.payloads.map((payload, index) => (
                <Typography key={payload.id} color="text.secondary" data-testid={`card-payload-${index}`}>
                  Payload: {payload.name}
                </Typography>
              ))}
              <Image
                src={launch.links.patch.small}
                alt="Launch Patch"
                width="200"
                height={200}
                data-testid="card-image"
              />
              <Typography color="text.secondary" data-testid="card-success">
                Success: {launch.success ? 'true' : 'false'}
              </Typography>
            </CardContent>
          </Card>
        ))}
      </main>
    </div>
  );
}
